<div class="site-content" ng-init="companyPage()">
    <h1 class="take-space animated fadeIn" ng-if="existing">{{company.name}}</h1>

    <section ng-if="!existing">
        <input class="block" type="text" autofocus="true"
            i18n="company/name_placeholder" prop="placeholder"
            ng-class="{ loading: vm.fetchingCompanySummary }"
            ng-model="company.name" ng-model-options="{ debounce: 300 }" />

        <div class="right-align margin-top-small margin-bottom-medium">
            <button ng-click="save()" i18n="admin/save"></button>
        </div>
    </section>

    <section ng-if="existing">
        <div class="right-align margin-top-small margin-bottom-medium">
            <button ng-click="vm.add_event.show()" i18n="company/add_event"></button>
        </div>

        <popover popover-backdrop popover-api="vm.add_event" class="popover--with-content">
            <company-event
                on-save="vm.add_event.hide()"
                on-cancel="vm.add_event.hide()"
                tied-to="{companies: [company.guid]}"
            ></company-event>
        </popover>
    </section>

    <p class="animated fadeIn" ng-repeat="paragraph in company.$summaryParts">{{::paragraph}}</p>

    <section ng-if="existing && company.$loaded" class="margin-top-xlarge">
        <followed-by
            users="company.followedBy"
            on-start-following="onStartFollowing()"
            on-stop-following="onStopFollowing()"
        ></followed-by>
    </section>
</div>
